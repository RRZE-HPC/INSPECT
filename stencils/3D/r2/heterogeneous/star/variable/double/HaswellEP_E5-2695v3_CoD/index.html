<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Stencil 3D r2 star variable heterogeneous double HaswellEP_E5-2695v3_CoD | INSPECT</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Stencil 3D r2 star variable heterogeneous double HaswellEP_E5-2695v3_CoD" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Intra Node Stencil Performance Evaluation Collection" />
<meta property="og:description" content="Intra Node Stencil Performance Evaluation Collection" />
<meta property="og:site_name" content="INSPECT" />
<script type="application/ld+json">
{"description":"Intra Node Stencil Performance Evaluation Collection","@type":"WebPage","url":"/INSPECT/stencils/3D/r2/heterogeneous/star/variable/double/HaswellEP_E5-2695v3_CoD/","headline":"Stencil 3D r2 star variable heterogeneous double HaswellEP_E5-2695v3_CoD","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/INSPECT/assets/css/style.css?v=86139e13712acfff06420f0269b071b684e970ad">
    <script src="https://code.jquery.com/jquery-3.3.0.min.js" integrity="sha256-RTQy8VOmNlT6b2PIRur37p6JEBZUE7o8wPgMvu18MC4=" crossorigin="anonymous"></script>
    <script src="/INSPECT/assets/js/main.js"></script>
    <!--[if lt IE 9]>
      <script src="https://cdn!js.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  </head>
  <body>

      <header>
        <h1>INSPECT</h1>
        <p>Intra Node Stencil Performance Evaluation Collection</p>
      </header>

      <div id="banner">
        <a href="https://github.com/RRZE-HPC/INSPECT" class="button fork"><strong>View this repository On GitHub</strong></a>
        <a href="https://github.com/RRZE-HPC/stempel" class="button fork stempel"><strong>View the stempel repository On GitHub</strong></a>
        <a id="logo" class="fork" href="/INSPECT/">⌂</a>
        
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        
<div id="navbar">
<a href="">3D / r2 / heterogeneous / star / variable / double / HaswellEP_E5-2695v3_CoD / Cluster on Die</a>
</div>

<script src="/INSPECT/assets/js/plotly-latest.min.js"></script>

<div class="section-block-full">

  <div class="section-block-half">
    <h2 id="stencil-properties">Stencil Properties</h2>

    <table>
      <tbody>
        <tr>
          <td>dimension</td>
          <td>3D</td>
        </tr>
        <tr>
          <td>radius</td>
          <td>2</td>
        </tr>
        <tr>
          <td>weighting</td>
          <td>heterogeneous</td>
        </tr>
        <tr>
          <td>kind</td>
          <td>star</td>
        </tr>
        <tr>
          <td>coefficients</td>
          <td>variable</td>
        </tr>
        <tr>
          <td>datatype</td>
          <td>double</td>
        </tr>
        <tr>
          <td>machine</td>
          <td><a href="/INSPECT/machines/HaswellEP_E5-2695v3_CoD">HaswellEP_E5-2695v3_CoD</a></td>
        </tr>
        <tr>
          <td>FLOP per LUP</td>
          <td>25</td>
        </tr>
        <tr>
          <td>flavor</td>
          <td>Cluster on Die</td>
        </tr>
      </tbody>
    </table>

    <p>Benchmark raw data shown on this page can be found in the <a href="https://github.com/RRZE-HPC/stempel_data_collection/tree/master/stencils/3D/r2/heterogeneous/star/variable/double/HaswellEP_E5-2695v3_CoD/">according folder of the git repository</a>.</p>

    <p>If you have feedback, issues or found errors on this page, please <a href="https://github.com/RRZE-HPC/stempel_data_collection/issues/new?labels[]=Stencil%20Comment%20Management&amp;labels[]=[Type]%20Bug&amp;title=Stencil%20Comment&amp;milestone=People%20Management:%20m6&amp;assignee=ebinnion&amp;body=Stencil:%203D%20r2%20heterogeneous%20star%20variable%20double%20HaswellEP_E5-2695v3_CoD%20Cluster on Die">submit an issue on the github page</a>.</p>

  </div>

  <div class="section-block-half">
    <h2 id="kernel-source-code">Kernel Source Code</h2>

    <p><input class="code-button" type="button" onclick="document.getElementById('c_source').style.display = 'block';document.getElementById('asm_source').style.display = 'none';document.getElementById('iaca').style.display = 'none'" value="C Source Code" />
<input class="code-button" type="button" onclick="document.getElementById('asm_source').style.display = 'block';document.getElementById('c_source').style.display = 'none';document.getElementById('iaca').style.display = 'none'" value="Assembly Code" /></p>

    <div id="c_source">
      <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">a</span><span class="p">[</span><span class="n">M</span><span class="p">][</span><span class="n">N</span><span class="p">][</span><span class="n">P</span><span class="p">];</span>
<span class="kt">double</span> <span class="n">b</span><span class="p">[</span><span class="n">M</span><span class="p">][</span><span class="n">N</span><span class="p">][</span><span class="n">P</span><span class="p">];</span>
<span class="kt">double</span> <span class="n">W</span><span class="p">[</span><span class="mi">13</span><span class="p">][</span><span class="n">M</span><span class="p">][</span><span class="n">N</span><span class="p">][</span><span class="n">P</span><span class="p">];</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">M</span> <span class="o">-</span> <span class="mi">2</span><span class="p">;</span> <span class="o">++</span><span class="n">k</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">N</span> <span class="o">-</span> <span class="mi">2</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">P</span> <span class="o">-</span> <span class="mi">2</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">b</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">W</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span>
                   <span class="n">W</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span>
                   <span class="n">W</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span>
                   <span class="n">W</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span>
                   <span class="n">W</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span>
                   <span class="n">W</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span>
                   <span class="n">W</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span>
                   <span class="n">W</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span> <span class="o">-</span> <span class="mi">2</span><span class="p">]</span> <span class="o">+</span>
                   <span class="n">W</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">+</span>
                   <span class="n">W</span><span class="p">[</span><span class="mi">9</span><span class="p">][</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">2</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span>
                   <span class="n">W</span><span class="p">[</span><span class="mi">10</span><span class="p">][</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="n">k</span> <span class="o">+</span> <span class="mi">2</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span>
                   <span class="n">W</span><span class="p">[</span><span class="mi">11</span><span class="p">][</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span> <span class="o">-</span> <span class="mi">2</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span>
                   <span class="n">W</span><span class="p">[</span><span class="mi">12</span><span class="p">][</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">a</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">2</span><span class="p">][</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>      </div>

    </div>

    <div id="asm_source" style="display:none;">
      <div class="language-nasm highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">mov</span> <span class="n">rdi</span><span class="p">,</span> <span class="n">qword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rsp</span><span class="o">+</span><span class="mh">0x230</span><span class="err">]</span>
<span class="n">vmovupd</span> <span class="n">ymm8</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">r13</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="n">vmovupd</span> <span class="n">ymm0</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">r15</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="n">vmovupd</span> <span class="n">ymm3</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rdi</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="n">vmovupd</span> <span class="n">ymm9</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rsi</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="n">vmovupd</span> <span class="n">ymm2</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">r9</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="n">vmulpd</span> <span class="n">ymm12</span><span class="p">,</span> <span class="n">ymm8</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rax</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="n">vmovupd</span> <span class="n">ymm10</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rcx</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="n">vmovupd</span> <span class="n">ymm4</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">r8</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x18</span><span class="err">]</span>
<span class="n">vmovupd</span> <span class="n">ymm11</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">r11</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="n">vmovupd</span> <span class="n">ymm5</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">r8</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x8</span><span class="err">]</span>
<span class="n">vmovupd</span> <span class="n">ymm6</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">r8</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="n">vmulpd</span> <span class="n">ymm13</span><span class="p">,</span> <span class="n">ymm10</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">r10</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="k">mov</span> <span class="n">rdi</span><span class="p">,</span> <span class="n">qword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rsp</span><span class="o">+</span><span class="mh">0x228</span><span class="err">]</span>
<span class="n">vfmadd231pd</span> <span class="n">ymm13</span><span class="p">,</span> <span class="n">ymm11</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">r12</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="n">vmovupd</span> <span class="n">ymm7</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rdi</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="k">mov</span> <span class="n">rdi</span><span class="p">,</span> <span class="n">qword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rsp</span><span class="o">+</span><span class="mh">0x208</span><span class="err">]</span>
<span class="n">vmovupd</span> <span class="n">ymm14</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rdi</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="k">mov</span> <span class="n">rdi</span><span class="p">,</span> <span class="n">qword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rsp</span><span class="o">+</span><span class="mh">0x280</span><span class="err">]</span>
<span class="n">vmulpd</span> <span class="n">ymm15</span><span class="p">,</span> <span class="n">ymm14</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">r8</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="err">]</span>
<span class="n">vmovupd</span> <span class="n">ymm1</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rdi</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="n">vfmadd231pd</span> <span class="n">ymm15</span><span class="p">,</span> <span class="n">ymm0</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rbx</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="n">vmulpd</span> <span class="n">ymm0</span><span class="p">,</span> <span class="n">ymm1</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">r8</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x20</span><span class="err">]</span>
<span class="k">mov</span> <span class="n">rdi</span><span class="p">,</span> <span class="n">qword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rsp</span><span class="o">+</span><span class="mh">0x220</span><span class="err">]</span>
<span class="n">vfmadd231pd</span> <span class="n">ymm12</span><span class="p">,</span> <span class="n">ymm9</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rdi</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="k">mov</span> <span class="n">rdi</span><span class="p">,</span> <span class="n">qword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rsp</span><span class="o">+</span><span class="mh">0x200</span><span class="err">]</span>
<span class="n">vaddpd</span> <span class="n">ymm8</span><span class="p">,</span> <span class="n">ymm12</span><span class="p">,</span> <span class="n">ymm13</span>
<span class="n">vfmadd231pd</span> <span class="n">ymm0</span><span class="p">,</span> <span class="n">ymm2</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rdi</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="k">mov</span> <span class="n">rdi</span><span class="p">,</span> <span class="n">qword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rsp</span><span class="o">+</span><span class="mh">0x268</span><span class="err">]</span>
<span class="n">vaddpd</span> <span class="n">ymm1</span><span class="p">,</span> <span class="n">ymm15</span><span class="p">,</span> <span class="n">ymm0</span>
<span class="n">vmulpd</span> <span class="n">ymm2</span><span class="p">,</span> <span class="n">ymm7</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rdi</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="k">mov</span> <span class="n">rdi</span><span class="p">,</span> <span class="n">qword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rsp</span><span class="o">+</span><span class="mh">0x270</span><span class="err">]</span>
<span class="n">vfmadd231pd</span> <span class="n">ymm2</span><span class="p">,</span> <span class="n">ymm3</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rdi</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="n">vaddpd</span> <span class="n">ymm3</span><span class="p">,</span> <span class="n">ymm8</span><span class="p">,</span> <span class="n">ymm1</span>
<span class="k">mov</span> <span class="n">rdi</span><span class="p">,</span> <span class="n">qword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rsp</span><span class="o">+</span><span class="mh">0x278</span><span class="err">]</span>
<span class="n">vfmadd231pd</span> <span class="n">ymm2</span><span class="p">,</span> <span class="n">ymm4</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rdi</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="k">mov</span> <span class="n">rdi</span><span class="p">,</span> <span class="n">qword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rsp</span><span class="o">+</span><span class="mh">0x260</span><span class="err">]</span>
<span class="n">vfmadd231pd</span> <span class="n">ymm2</span><span class="p">,</span> <span class="n">ymm5</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rdi</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="k">mov</span> <span class="n">rdi</span><span class="p">,</span> <span class="n">qword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rsp</span><span class="o">+</span><span class="mh">0x210</span><span class="err">]</span>
<span class="n">vfmadd231pd</span> <span class="n">ymm2</span><span class="p">,</span> <span class="n">ymm6</span><span class="p">,</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rdi</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span>
<span class="n">vaddpd</span> <span class="n">ymm4</span><span class="p">,</span> <span class="n">ymm3</span><span class="p">,</span> <span class="n">ymm2</span>
<span class="n">vmovupd</span> <span class="n">ymmword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rdx</span><span class="o">+</span><span class="n">r14</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="mh">0x10</span><span class="err">]</span><span class="p">,</span> <span class="n">ymm4</span>
<span class="k">add</span> <span class="n">r14</span><span class="p">,</span> <span class="mh">0x4</span>
<span class="k">cmp</span> <span class="n">r14</span><span class="p">,</span> <span class="n">qword</span> <span class="n">ptr</span> <span class="err">[</span><span class="n">rsp</span><span class="o">+</span><span class="mh">0x1f0</span><span class="err">]</span>
<span class="k">jb</span> <span class="mh">0xfffffffffffffecf</span>
</code></pre></div>      </div>
    </div>
  </div>

</div>

<div class="section-block-full">

  <div class="section-block-half">

    <h2 id="layer-conditions">Layer Conditions</h2>

    <h4 id="d-layer-condition">1D Layer Condition:</h4>

    <ul>
      <li>L1: unconditionally fulfilled</li>
      <li>L2: unconditionally fulfilled</li>
      <li>L3: unconditionally fulfilled</li>
    </ul>

    <h4 id="d-layer-condition-1">2D Layer Condition:</h4>

    <ul>
      <li>L1: <code class="highlighter-rouge">P &lt;= 4096/23</code>, that is	<code class="highlighter-rouge">P &lt;= 170</code></li>
      <li>L2: <code class="highlighter-rouge">P &lt;= 32768/23</code>, that is	<code class="highlighter-rouge">P &lt;= 1420</code></li>
      <li>L3: <code class="highlighter-rouge">P &lt;= 2359296/23</code>, that is	<code class="highlighter-rouge">P &lt;= 102570</code></li>
    </ul>

    <h4 id="d-layer-condition-2">3D Layer Condition:</h4>

    <ul>
      <li>L1: <code class="highlighter-rouge">136*N*P + 16*P*(N - 2) + 32*P &lt;= 32768</code>, that is	<code class="highlighter-rouge">N*P &lt;= 10²</code></li>
      <li>L2: <code class="highlighter-rouge">136*N*P + 16*P*(N - 2) + 32*P &lt;= 262144</code>, that is	<code class="highlighter-rouge">N*P &lt;= 40²</code></li>
      <li>L3: <code class="highlighter-rouge">136*N*P + 16*P*(N - 2) + 32*P &lt;= 18874368</code>, that is	<code class="highlighter-rouge">N*P &lt;= 320²</code></li>
    </ul>

    <p>Have a look at the <a href="#kernel-source-code">kernel source code</a> for dimension naming.</p>

    <!--
grep "\[[a-z]" stencil.c | sed -r 's/([A-Z])\[([0-9]*)\]/\1\2/g' | sed 's/.* =//;s/ c[0-9]* //;s/[ijk]//g;s/(//g;s/)//g;s/+ /,/g;s/\* /,/g;s/\[\]/\[0\]/g;s/+,/,/;s/[[:space:]]//g;s/[a-Z][0-9]*/\"&\":/g;s/\]\[/,/g' | tr -d '\n'
-->

    <!-- <script>
function get_url() {
var jsonstr='{"dimensions":3,"arrays":{"type":"double","bytes_per_element":8,"dimension":[1024,1024,1024]},"accesses":{"a":[0,0,0],"a":[-1,-1,-1],"a":[0,-1,-1],"a":[+1,-1,-1],"a":[-1,0,-1],"a":[0,0,-1],"a":[+1,0,-1],"a":[-1,+1,-1],"a":[0,+1,-1],"a":[+1,+1,-1],"a":[-1,-1,0],"a":[0,-1,0],"a":[+1,-1,0],"a":[-1,0,0],"a":[+1,0,0],"a":[-1,+1,0],"a":[0,+1,0],"a":[+1,+1,0],"a":[-1,-1,+1],"a":[0,-1,+1],"a":[+1,-1,+1],"a":[-1,0,+1],"a":[0,0,+1],"a":[+1,0,+1],"a":[-1,+1,+1],"a":[0,+1,+1],"a":[+1,+1,+1]},"cache_sizes":{"L1":{"size":32768,"cores":1,"available":32768},"L2":{"size":262144,"cores":1,"available":262144},"L3":{"size":20971520,"cores":1,"available":20971520}},"safety_margin":2}'
return "https://rrze-hpc.github.io/layer-condition/#calculator%23!"+encodeURIComponent(JSON.stringify(jsonstr));
}
</script>

<a href='get_url()'>Layer Condition website</a> -->

  </div>

  <div class="section-block-half">
    <h2 id="how-to-test-this-stencil">How to test this stencil</h2>

    <p>Generate this stencil with:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>stempel gen <span class="nt">-D</span> 3 <span class="nt">-r</span> 2 <span class="nt">-t</span> double <span class="nt">-C</span> variable <span class="nt">-k</span> star <span class="nt">-e</span> <span class="nt">--store</span> stencil.c
</code></pre></div>    </div>

    <p>and generate the compilable benchmark code with:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>stempel bench stencil.c <span class="nt">-m</span> HaswellEP_E5-2695v3_CoD.yml <span class="nt">--store</span>
</code></pre></div>    </div>

    <h2 id="compiler-flags">Compiler flags</h2>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>icc <span class="nt">-O3</span> <span class="nt">-xCORE-AVX2</span> <span class="nt">-fno-alias</span> <span class="nt">-qopenmp</span> <span class="nt">-qopenmp</span> <span class="nt">-DLIKWID_PERFMON</span> <span class="nt">-Ilikwid-4</span>.3.3/include <span class="nt">-Llikwid-4</span>.3.3/lib <span class="nt">-Iheaders</span>/dummy.c stencil_compilable.c <span class="nt">-o</span> stencil <span class="nt">-llikwid</span>
</code></pre></div>    </div>
  </div>

</div>

<div class="section-block-full">
  <h2 id="single-core-grid-scaling">Single Core Grid Scaling</h2>

  <div class="section-block-half">
    <h3 id="ecm-prediction-vs-performance">ECM Prediction vs. Performance</h3>

    <p><input class="plot-button" type="button" value="Layer Condition" onclick="document.getElementById('ecm_LC').style.display = 'block';            document.getElementById('ecm_CS').style.display = 'none';            document.getElementById('ecm_Pheno').style.display = 'none';" />
<input class="plot-button" type="button" value="Cache Simulation" onclick="document.getElementById('ecm_CS').style.display = 'block';            document.getElementById('ecm_LC').style.display = 'none';            document.getElementById('ecm_Pheno').style.display = 'none';" />
<input class="plot-button" type="button" value="Phenomenological" onclick="document.getElementById('ecm_Pheno').style.display = 'block';            document.getElementById('ecm_CS').style.display = 'none';            document.getElementById('ecm_LC').style.display = 'none';" /></p>

    <div class="ecm" id="ecm_LC">

      <script>
var trace_benchmark = {
  type: "scatter",
  mode: "markers",
  marker: { symbol: "cross-thin-open" },
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [183.13,126.81,119.45,162.10,117.91,187.45,207.49,247.93,219.23,208.41,224.07,225.23,222.87,215.20,231.72,267.09,219.96,219.74,220.14,219.13,233.13,225.51,224.71,225.00,228.33,229.68,233.41,223.25,235.94,230.75,231.90,263.81,232.02,235.28,235.80,233.11,238.91,241.68,242.83,243.33,243.48,248.18,248.57,245.11,246.49,249.87,248.19,250.34,247.65,250.56,],
  line: {color: 'black'},
  name: "Benchmark"
};
var trace_Tol = {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,],
  line: {color: '#d62728'},
  name: "T<sub>OL</sub>"
};
var trace_Tnol = {
  type: "histogram",
  xbins: {size:10},
  histfunc: "sum",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,],
  marker: {color: '#1f77b4'},
  name: "T<sub>nOL</sub>"
};
var trace_Tl1l2 = {
  type: "histogram",
  xbins: {size:10},
  histfunc: "sum",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [32.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,48.0,],
  marker: {color: '#aec7e8'},
  name: "T<sub>L1-L2</sub>"
};
var trace_Tl2l3 = {
  type: "histogram",
  xbins: {size:10},
  histfunc: "sum",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [0.0,32.0,32.0,32.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,40.0,],
  marker: {color: '#ff7f0e'},
  name: "T<sub>L2-L3</sub>"
};
var trace_Tl3mem = {
  type: "histogram",
  xbins: {size:10},
  histfunc: "sum",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [0.0,0.0,0.0,0.0,0.0,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,83.7,104.7,104.7,104.7,104.7,104.7,104.7,104.7,104.7,104.7,104.7,104.7,104.7,104.7,104.7,104.7,],
  marker: {color: '#ffbb78'},
  name: "T<sub>L3-MEM</sub>"
};
var trace_Ttotal = {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [70.2 ,110.2 ,110.2 ,110.2 ,118.2 ,201.9 ,201.9 ,201.9 ,201.9 ,201.9 ,201.9 ,201.9 ,201.9 ,201.9 ,201.9 ,201.9 ,201.9 ,209.9 ,209.9 ,209.9 ,209.9 ,209.9 ,209.9 ,209.9 ,209.9 ,209.9 ,209.9 ,209.9 ,209.9 ,209.9 ,209.9 ,209.9 ,209.9 ,209.9 ,209.9 ,230.9 ,230.9 ,230.9 ,230.9 ,230.9 ,230.9 ,230.9 ,230.9 ,230.9 ,230.9 ,230.9 ,230.9 ,230.9 ,230.9 ,230.9 ,],
  line: {color: 'rgba(0,0,0,0)'},
  showlegend: false,
  name: "T<sub>ECM total</sub>"
};


var data = [trace_Tnol,trace_Tl1l2,trace_Tl2l3,trace_Tl3mem,trace_Tol,trace_Ttotal,trace_benchmark];

var layout = {
  margin: { l: 40, r: 35, t: 10, b: 40},
  xaxis: {title: "Grid Size (N^3)",
          dticks: 50,
          tick0: 0},
  yaxis: {title: 'Cycles / Cacheline',
          tick0: 0},
  barmode: 'stack',
  legend: { orientation: "h",y:1.1},
  width: 600,
  height: 450,
};

var config = {locale: 'en'};
Plotly.newPlot('ecm_LC', data, layout, config);
</script>

      <p><em>Comparison of the measured stencil performance (in cycles per cache line) and the (stacked) contributions of the <a href="https://hpc.fau.de/research/ecm/">ECM Performance Model</a> predicted by <a href="https://github.com/RRZE-HPC/kerncraft">kerncraft</a> using <a href="https://rrze-hpc.github.io/layer-condition/">Layer Conditions</a> to model the cache behavior. The calculated <a href="#layer-conditions">layer conditions</a> shown above correspond to the jumps in the ECM prediction in this plot.</em></p>

    </div>

    <div class="ecm" id="ecm_CS" style="display:none;">

      <script>
var trace_benchmark = {
  type: "scatter",
  mode: "markers",
  marker: { symbol: "cross-thin-open" },
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [183.13,126.81,119.45,162.10,117.91,187.45,207.49,247.93,219.23,208.41,224.07,225.23,222.87,215.20,231.72,267.09,219.96,219.74,220.14,219.13,233.13,225.51,224.71,225.00,228.33,229.68,233.41,223.25,235.94,230.75,231.90,263.81,232.02,235.28,235.80,233.11,238.91,241.68,242.83,243.33,243.48,248.18,248.57,245.11,246.49,249.87,248.19,250.34,247.65,250.56,],
  line: {color: 'black'},
  name: "Benchmark"
};
var trace_Tol = {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,39.2,],
  line: {color: '#d62728'},
  name: "T<sub>OL</sub>"
};
var trace_Tnol = {
  type: "histogram",
  xbins: {size:10},
  histfunc: "sum",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,38.2,],
  marker: {color: '#1f77b4'},
  name: "T<sub>nOL</sub>"
};
var trace_Tl1l2 = {
  type: "histogram",
  xbins: {size:10},
  histfunc: "sum",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [56.9,50.6,46.7,267.3,43.7,43.0,42.6,294.4,42.0,41.8,41.6,266.4,43.4,41.2,41.2,322.1,41.1,45.0,47.0,266.2,46.9,46.9,48.9,294.1,48.8,48.7,48.7,270.2,48.7,48.6,48.6,340.1,48.6,48.6,48.6,270.2,48.5,48.5,48.5,298.1,48.5,48.5,48.5,270.1,48.4,48.4,48.4,326.1,48.4,48.4,],
  marker: {color: '#aec7e8'},
  name: "T<sub>L1-L2</sub>"
};
var trace_Tl2l3 = {
  type: "histogram",
  xbins: {size:10},
  histfunc: "sum",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [0.0,41.2,37.8,36.1,42.8,43.0,42.6,266.4,42.0,41.8,41.6,41.4,41.3,41.2,41.2,266.3,41.0,41.0,40.9,40.8,40.8,40.8,40.7,266.2,40.7,40.7,40.6,40.6,40.6,40.6,40.5,336.0,40.5,40.5,40.5,40.4,40.4,40.4,40.4,266.1,40.4,40.4,40.4,40.4,40.4,40.4,40.4,266.1,40.4,40.3,],
  marker: {color: '#ff7f0e'},
  name: "T<sub>L2-L3</sub>"
};
var trace_Tl3mem = {
  type: "histogram",
  xbins: {size:10},
  histfunc: "sum",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [0.0,0.0,0.0,0.0,0.0,90.8,90.7,88.4,87.9,87.5,87.1,86.8,86.6,86.3,86.2,86.0,85.9,85.7,85.7,85.5,85.5,85.4,85.3,85.3,85.2,85.3,85.0,85.1,85.0,85.0,85.0,84.9,84.9,84.7,89.3,94.5,105.1,104.8,105.9,105.4,105.7,105.9,105.8,105.7,105.8,105.5,105.5,105.8,105.7,105.5,],
  marker: {color: '#ffbb78'},
  name: "T<sub>L3-MEM</sub>"
};
var trace_Ttotal = {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [95.1 ,130.0 ,122.7 ,341.6 ,124.7 ,215.1 ,214.1 ,687.5 ,210.0 ,209.2 ,208.5 ,432.9 ,209.5 ,207.0 ,206.7 ,712.6 ,206.2 ,209.9 ,211.8 ,430.8 ,211.5 ,211.3 ,213.1 ,683.8 ,212.8 ,212.9 ,212.5 ,434.1 ,212.5 ,212.4 ,212.3 ,799.2 ,212.2 ,212.0 ,216.5 ,443.3 ,232.2 ,231.9 ,233.0 ,707.8 ,232.8 ,232.9 ,232.8 ,454.5 ,232.8 ,232.5 ,232.5 ,736.1 ,232.7 ,232.4 ,],
  line: {color: 'rgba(0,0,0,0)'},
  showlegend: false,
  name: "T<sub>ECM total</sub>"
};


var data = [trace_Tnol,trace_Tl1l2,trace_Tl2l3,trace_Tl3mem,trace_Tol,trace_Ttotal,trace_benchmark];

var layout = {
  margin: { l: 40, r: 35, t: 10, b: 40},
  xaxis: {title: "Grid Size (N^3)",
          dticks: 50,
          tick0: 0},
  yaxis: {title: 'Cycles / Cacheline',
          tick0: 0},
  barmode: 'stack',
  legend: { orientation: "h",y:1.1},
  width: 600,
  height: 450,
};

var config = {locale: 'en'};
Plotly.newPlot('ecm_CS', data, layout, config);
</script>

      <p><em>Comparison of the measured stencil performance (in cycles per cache line) and the (stacked) contributions of the <a href="https://hpc.fau.de/research/ecm/">ECM Performance Model</a> predicted by <a href="https://github.com/RRZE-HPC/kerncraft">kerncraft</a> using <a href="https://github.com/RRZE-HPC/pycachesim">Cache Simulation</a> to model the cache behavior.</em></p>

    </div>

    <div class="ecm" id="ecm_Pheno" style="display:none;">

      <script>
var trace_benchmark = {
  type: "scatter",
  mode: "markers",
  marker: { symbol: "cross-thin-open" },
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [183.13,126.81,119.45,162.10,117.91,187.45,207.49,247.93,219.23,208.41,224.07,225.23,222.87,215.20,231.72,267.09,219.96,219.74,220.14,219.13,233.13,225.51,224.71,225.00,228.33,229.68,233.41,223.25,235.94,230.75,231.90,263.81,232.02,235.28,235.80,233.11,238.91,241.68,242.83,243.33,243.48,248.18,248.57,245.11,246.49,249.87,248.19,250.34,247.65,250.56,],
  line: {color: 'black'},
  name: "Benchmark"
};
var trace_Tol = {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [50.9,20.3,23.6,18.3,20.8,17.7,19.7,17.6,19.3,17.5,18.8,17.5,18.7,17.5,18.6,18.2,18.5,19.9,19.1,19.8,18.9,19.4,18.8,19.4,18.9,19.3,18.8,19.1,18.7,19.0,18.7,19.3,18.6,18.9,18.6,18.8,18.6,18.7,18.5,18.8,18.4,18.6,18.4,18.6,18.3,18.6,18.4,18.7,18.4,18.5,],
  line: {color: '#d62728'},
  name: "T<sub>OL</sub>"
};
var trace_Tnol = {
  type: "histogram",
  xbins: {size:10},
  histfunc: "sum",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [118.6,46.9,56.0,41.9,48.1,40.5,45.1,39.8,43.4,39.4,42.4,39.2,41.7,39.0,41.2,38.9,40.8,42.1,40.3,41.7,40.1,41.3,39.9,41.0,39.7,40.8,39.6,40.6,39.5,40.4,39.4,40.3,39.3,40.1,39.2,40.0,39.2,39.9,39.1,39.8,39.1,39.7,39.0,39.6,39.0,39.6,38.9,39.5,38.9,39.4,],
  marker: {color: '#1f77b4'},
  name: "T<sub>nOL</sub>"
};
var trace_Tl1l2 = {
  type: "histogram",
  xbins: {size:10},
  histfunc: "sum",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [55.6,52.7,46.8,77.5,44.4,44.0,43.3,76.6,42.6,42.7,42.4,66.6,44.9,43.0,44.3,87.2,44.3,46.0,47.0,48.1,46.4,47.0,47.1,49.9,49.9,50.0,50.0,52.0,49.8,49.9,49.8,74.6,49.7,49.7,49.6,52.2,49.6,49.7,49.6,53.4,49.6,49.8,49.5,52.7,49.5,49.5,49.5,56.2,49.5,49.4,],
  marker: {color: '#aec7e8'},
  name: "T<sub>L1-L2</sub>"
};
var trace_Tl2l3 = {
  type: "histogram",
  xbins: {size:10},
  histfunc: "sum",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [0.0,49.4,42.6,43.7,44.8,43.8,43.0,42.9,42.3,42.1,41.8,41.8,41.5,41.5,41.3,41.5,41.2,41.0,41.0,41.0,40.9,40.9,40.8,40.8,40.8,40.7,41.0,40.7,40.7,40.6,40.6,40.9,40.6,40.5,40.5,40.6,40.5,40.5,40.5,40.5,40.5,40.5,40.4,40.4,40.4,40.4,40.4,40.5,40.4,40.3,],
  marker: {color: '#ff7f0e'},
  name: "T<sub>L2-L3</sub>"
};
var trace_Tl3mem = {
  type: "histogram",
  xbins: {size:10},
  histfunc: "sum",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [0.1,0.0,0.0,0.0,3.3,54.5,88.9,91.2,89.7,88.9,88.4,88.0,87.6,87.4,87.2,87.2,86.9,86.7,86.6,86.6,86.8,86.7,86.6,86.7,86.8,87.2,87.2,88.0,88.2,88.9,89.0,91.3,90.5,92.4,93.0,95.8,96.5,99.1,100.4,102.3,103.3,104.4,105.0,105.6,106.0,106.3,106.5,106.5,106.8,106.9,],
  marker: {color: '#ffbb78'},
  name: "T<sub>L3-MEM</sub>"
};
var trace_Ttotal = {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [],
  line: {color: 'rgba(0,0,0,0)'},
  showlegend: false,
  name: "T<sub>ECM total</sub>"
};


var data = [trace_Tnol,trace_Tl1l2,trace_Tl2l3,trace_Tl3mem,trace_Tol,trace_Ttotal,trace_benchmark];

var layout = {
  margin: { l: 40, r: 35, t: 10, b: 40},
  xaxis: {title: "Grid Size (N^3)",
          dticks: 50,
          tick0: 0},
  yaxis: {title: 'Cycles / Cacheline',
          tick0: 0},
  barmode: 'stack',
  legend: { orientation: "h",y:1.1},
  width: 600,
  height: 450,
};

var config = {locale: 'en'};
Plotly.newPlot('ecm_Pheno', data, layout, config);
</script>

      <p><em>Comparison of the measured stencil performance (in cycles per cache line) and the (stacked) contributions of the <a href="https://hpc.fau.de/research/ecm/">ECM Performance Model</a> predicted by <a href="https://github.com/RRZE-HPC/kerncraft">kerncraft</a> using <a href="https://github.com/RRZE-HPC/pycachesim">Cache Simulation</a> to model the cache behavior.</em></p>

    </div>

  </div>

  <div class="section-block-half">
    <h3 id="stencil-performance">Stencil Performance</h3>

    <p><input class="plot-button" type="button" value="Layer Condition" onclick="document.getElementById('rfl_LC').style.display = 'block';            document.getElementById('rfl_CS').style.display = 'none';" />
<input class="plot-button" type="button" value="Cache Simulation" onclick="document.getElementById('rfl_CS').style.display = 'block';            document.getElementById('rfl_LC').style.display = 'none';" /></p>

    <div class="roofline" id="rfl_LC">

      <script>
var trace_benchmark = {
  type: "scatter",
  mode: "markers",
  marker: { symbol: "cross-thin-open" },
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [100.47,145.09,154.04,113.51,156.05,98.16,88.68,74.21,83.93,88.29,82.12,81.69,82.56,85.50,79.41,68.89,83.65,83.74,83.58,83.97,78.93,81.59,81.88,81.78,80.59,80.11,78.83,82.42,77.99,79.74,79.34,69.75,79.30,78.20,78.03,78.93,77.02,76.13,75.77,75.62,75.57,74.14,74.02,75.07,74.65,73.64,74.14,73.50,74.30,73.44,],
  line: {color: 'black'},
  name: "Benchmark"
};
var trace_roofline = {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [287.60,230.00,230.00,230.00,186.00,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,99.60,99.60,99.60,99.60,99.60,99.60,99.60,99.60,99.60,99.60,99.60,99.60,99.60,99.60,99.60,],
  line: {color: '#1f77b4'},
  name: "Roofline prediction with LC"
};
var trace_ecm = {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [261.99,166.96,166.96,166.96,155.66,91.13,91.13,91.09,91.13,91.13,91.13,91.13,91.09,91.13,91.13,91.13,91.13,87.62,87.62,87.62,87.66,87.66,87.66,87.62,87.66,87.66,87.62,87.62,87.66,87.62,87.66,87.62,87.62,87.62,87.62,79.65,79.65,79.65,79.65,79.68,79.68,79.68,79.68,79.65,79.68,79.65,79.68,79.68,79.65,79.65,],
  line: {color: '#ff7f0e'},
  name: "ECM prediction with LC"
};

var data = [trace_roofline,trace_ecm,trace_benchmark];

var layout = {
	xaxis: {title: "Grid Size (N^3)",
          rangemode: "tozero"},
	yaxis: {title: 'Performance [MLUP/s]',
          rangemode: "tozero"},
  margin: { l: 50, r: 35, t: 10, b: 40},
  legend: { orientation: "h",y:1.1},
  width: 600,
  height: 450,
};

var config = {locale: 'en'};
Plotly.newPlot('rfl_LC', data, layout, config);
</script>

      <p><em>Performance plot with <a href="https://www2.eecs.berkeley.edu/Pubs/TechRpts/2008/EECS-2008-164.html">roofline prediction</a> in comparison with the measured stencil performance. For comparison the according ECM prediction is also included.</em></p>

    </div>

    <div class="roofline" id="rfl_CS" style="display:none;">

      <script>
var trace_benchmark = {
  type: "scatter",
  mode: "markers",
  marker: { symbol: "cross-thin-open" },
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [100.47,145.09,154.04,113.51,156.05,98.16,88.68,74.21,83.93,88.29,82.12,81.69,82.56,85.50,79.41,68.89,83.65,83.74,83.58,83.97,78.93,81.59,81.88,81.78,80.59,80.11,78.83,82.42,77.99,79.74,79.34,69.75,79.30,78.20,78.03,78.93,77.02,76.13,75.77,75.62,75.57,74.14,74.02,75.07,74.65,73.64,74.14,73.50,74.30,73.44,],
  line: {color: 'black'},
  name: "Benchmark"
};
var trace_roofline = {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [161.60,180.80,196.80,,174.00,114.80,115.20,,118.80,119.20,119.60,,120.40,120.80,121.20,,121.60,121.60,121.60,,122.00,122.40,122.40,,122.40,122.40,122.80,,122.80,122.80,122.80,,122.80,123.20,116.80,,99.20,99.60,98.40,,98.80,98.40,98.80,,98.80,98.80,98.80,,98.80,98.80,],
  line: {color: '#1f77b4'},
  name: "Roofline prediction with CS"
};
var trace_ecm = {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [261.99,166.96,166.96,166.96,155.66,91.13,91.13,91.09,91.13,91.13,91.13,91.13,91.09,91.13,91.13,91.13,91.13,87.62,87.62,87.62,87.66,87.66,87.66,87.62,87.66,87.66,87.62,87.62,87.66,87.62,87.66,87.62,87.62,87.62,87.62,79.65,79.65,79.65,79.65,79.68,79.68,79.68,79.68,79.65,79.68,79.65,79.68,79.68,79.65,79.65,],
  line: {color: '#ff7f0e'},
  name: "ECM prediction with CS"
};

var data = [trace_roofline,trace_ecm,trace_benchmark];

var layout = {
	xaxis: {title: "Grid Size (N^3)",
          rangemode: "tozero"},
	yaxis: {title: 'Performance [MLUP/s]',
          rangemode: "tozero"},
  margin: { l: 50, r: 35, t: 10, b: 40},
  legend: { orientation: "h",y:1.1},
  width: 600,
  height: 450,
};

var config = {locale: 'en'};
Plotly.newPlot('rfl_CS', data, layout, config);
</script>

      <p><em>Performance plot with <a href="https://www2.eecs.berkeley.edu/Pubs/TechRpts/2008/EECS-2008-164.html">roofline prediction</a> in comparison with the measured stencil performance. For comparison the according ECM prediction is also included.</em></p>

    </div>

  </div>

</div>

<div class="section-block-full">

  <div class="section-block-half">
    <h3 id="data-transfers-between-caches">Data Transfers between Caches</h3>

    <p><input class="plot-button" type="button" value="Layer Condition" onclick="document.getElementById('mem_LC').style.display = 'block';            document.getElementById('mem_CS').style.display = 'none';" />
<input class="plot-button" type="button" value="Cache Simulation" onclick="document.getElementById('mem_CS').style.display = 'block';            document.getElementById('mem_LC').style.display = 'none';" /></p>

    <div class="memory" id="mem_LC">

      <script>
var benchmark_l1l2 = {
  type: "scatter",
  mode: "markers",
  marker: { symbol: "cross-thin-open" },
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [222.40,210.56,187.20,309.92,177.52,176.16,173.28,306.40,170.48,170.72,169.52,266.24,179.68,172.08,177.20,348.72,177.20,184.00,187.84,192.40,185.44,188.08,188.32,199.44,199.44,200.00,199.84,208.00,199.28,199.60,198.96,298.32,198.80,198.88,198.48,208.96,198.40,198.72,198.32,213.44,198.32,199.12,198.16,210.64,198.16,197.84,198.08,224.64,198.00,197.84,],
  line: {color: '#d62728'},
  name: "L1-L2 Benchmark"
};
var benchmark_l2l3 = {
  type: "scatter",
  mode: "markers",
  marker: { symbol: "cross-thin-open" },
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [0,197.60,170.56,174.88,179.36,175.36,172.24,171.60,169.36,168.48,167.36,167.28,166.00,165.84,165.28,166.00,164.64,164.16,164.00,163.84,163.52,163.44,163.36,163.36,163.12,162.88,164.00,162.88,162.64,162.56,162.40,163.60,162.32,162.16,162.16,162.48,162.08,161.92,162.00,162.00,161.84,161.92,161.76,161.68,161.76,161.60,161.68,161.84,161.44,161.36,],
  line: {color: '#1f77b4'},
  name: "L2-L3 Benchmark"
};
var benchmark_l3mem = {
  type: "scatter",
  mode: "markers",
  marker: { symbol: "cross-thin-open" },
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [0,0,0,0,5.12,83.36,135.84,139.28,137.12,136.00,135.20,134.56,133.92,133.52,133.28,133.28,132.72,132.56,132.40,132.32,132.72,132.56,132.48,132.48,132.72,133.20,133.28,134.48,134.80,135.84,136.08,139.60,138.32,141.28,142.08,146.48,147.52,151.44,153.52,156.40,157.92,159.60,160.48,161.36,162.00,162.48,162.72,162.72,163.28,163.44,],
  line: {color: '#ff7f0e'},
  name: "L3-MEM Benchmark"
};

var L1L2 = {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [128.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,192.00,],
  line: {color: '#d62728'},
  name: "L1-L2 with LC"
};
var L2L3= {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [0,128.00,128.00,128.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,],
  line: {color: '#1f77b4'},
  name: "L2-L3 with LC"
};
var L3MEM = {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [0,0,0,0,0,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,128.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,160.00,],
  line: {color: '#ff7f0e'},
  name: "L3-MEM with LC"
};

var data = [benchmark_l1l2,benchmark_l2l3,benchmark_l3mem,L1L2,L2L3,L3MEM];

var layout = {
	xaxis: {title: "Grid Size (N^3)",
          rangemode: "tozero"},
	yaxis: {title: 'Data Transfers [Byte/LUP]',
          rangemode: "tozero"},
  margin: { l: 50, r: 35, t: 10, b: 40},
  legend: { orientation: "h",y:1.3},
  width: 600,
  height: 450,
};

var config = {locale: 'en'};
Plotly.newPlot('mem_LC', data, layout, config);
</script>

      <p><em>Data transfers between the different cache levels and main memory. The shown data for each level contains evicted and loaded data. The measured data is represented by points and the predicted transfer rates by <a href="https://github.com/RRZE-HPC/kerncraft">kerncraft</a> by lines.</em></p>

    </div>

    <div class="memory" id="mem_CS" style="display:none;">

      <script>
var benchmark_l1l2 = {
  type: "scatter",
  mode: "markers",
  marker: { symbol: "cross-thin-open" },
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [222.40,210.56,187.20,309.92,177.52,176.16,173.28,306.40,170.48,170.72,169.52,266.24,179.68,172.08,177.20,348.72,177.20,184.00,187.84,192.40,185.44,188.08,188.32,199.44,199.44,200.00,199.84,208.00,199.28,199.60,198.96,298.32,198.80,198.88,198.48,208.96,198.40,198.72,198.32,213.44,198.32,199.12,198.16,210.64,198.16,197.84,198.08,224.64,198.00,197.84,],
  line: {color: '#d62728'},
  name: "L1-L2 Benchmark"
};
var benchmark_l2l3 = {
  type: "scatter",
  mode: "markers",
  marker: { symbol: "cross-thin-open" },
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [0,197.60,170.56,174.88,179.36,175.36,172.24,171.60,169.36,168.48,167.36,167.28,166.00,165.84,165.28,166.00,164.64,164.16,164.00,163.84,163.52,163.44,163.36,163.36,163.12,162.88,164.00,162.88,162.64,162.56,162.40,163.60,162.32,162.16,162.16,162.48,162.08,161.92,162.00,162.00,161.84,161.92,161.76,161.68,161.76,161.60,161.68,161.84,161.44,161.36,],
  line: {color: '#1f77b4'},
  name: "L2-L3 Benchmark"
};
var benchmark_l3mem = {
  type: "scatter",
  mode: "markers",
  marker: { symbol: "cross-thin-open" },
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [0,0,0,0,5.12,83.36,135.84,139.28,137.12,136.00,135.20,134.56,133.92,133.52,133.28,133.28,132.72,132.56,132.40,132.32,132.72,132.56,132.48,132.48,132.72,133.20,133.28,134.48,134.80,135.84,136.08,139.60,138.32,141.28,142.08,146.48,147.52,151.44,153.52,156.40,157.92,159.60,160.48,161.36,162.00,162.48,162.72,162.72,163.28,163.44,],
  line: {color: '#ff7f0e'},
  name: "L3-MEM Benchmark"
};

var L1L2 = {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [227.62,202.37,186.75,1069.37,175.00,172.12,170.37,1177.75,167.87,166.99,166.37,1065.62,173.50,165.00,164.62,1288.37,164.50,179.99,187.99,1065.00,187.62,187.62,195.37,1176.50,195.12,194.99,194.87,1080.87,194.74,194.62,194.49,1360.25,194.37,194.37,194.24,1080.62,194.12,194.12,193.99,1192.50,193.87,193.87,193.87,1080.62,193.74,193.74,193.74,1304.25,193.62,193.62,],
  line: {color: '#d62728'},
  name: "L1-L2 with CS"
};
var L2L3= {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [0,164.75,151.12,144.24,171.25,172.12,170.37,1065.62,167.87,166.99,166.37,165.75,165.37,165.00,164.62,1065.25,164.12,163.74,163.62,163.37,163.24,163.12,162.99,1064.87,162.74,162.62,162.62,162.49,162.37,162.24,162.24,1344.12,162.12,161.99,161.99,161.87,161.74,161.74,161.87,1064.50,161.74,161.74,161.74,161.62,161.62,161.62,161.62,1064.50,161.49,161.37,],
  line: {color: '#1f77b4'},
  name: "L2-L3 with CS"
};
var L3MEM = {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [0,0,0,0,0,138.87,138.62,135.12,134.37,133.74,133.12,132.62,132.37,132.00,131.62,131.50,131.37,130.99,131.00,130.74,130.62,130.49,130.37,130.37,130.12,130.25,129.87,129.99,129.87,129.87,129.87,129.74,129.87,129.50,136.49,144.37,160.49,160.24,161.87,160.99,161.49,161.87,161.74,161.62,161.75,161.25,161.25,161.62,161.62,161.37,],
  line: {color: '#ff7f0e'},
  name: "L3-MEM with CS"
};

var data = [benchmark_l1l2,benchmark_l2l3,benchmark_l3mem,L1L2,L2L3,L3MEM];

var layout = {
	xaxis: {title: "Grid Size (N^3)",
          rangemode: "tozero"},
	yaxis: {title: 'Data Transfers [Byte/LUP]',
          rangemode: "tozero"},
  margin: { l: 50, r: 35, t: 10, b: 40},
  legend: { orientation: "h",y:1.3},
  width: 600,
  height: 450,
};

var config = {locale: 'en'};
Plotly.newPlot('mem_CS', data, layout, config);
</script>

      <p><em>Data transfers between the different cache levels and main memory. The shown data for each level contains evicted and loaded data. The measured data is represented by points and the predicted transfer rates by <a href="https://github.com/RRZE-HPC/kerncraft">kerncraft</a> by lines.</em></p>

    </div>

  </div>

</div>

<div class="section-block-full">
  <div class="section-block-half">
    <h2 id="multi-core-thread-scaling">Multi Core Thread Scaling</h2>

    <p><input class="plot-button" type="button" onclick="document.getElementById('scaling_490').style.display = 'none';document.getElementById('scaling_490').style.display = 'block';" value="490³" /></p>

    <div class="scaling">

      <div id="scaling"></div>

      <script>
var trace_benchmark = {
  type: "scatter",
  mode: "markers",
  marker: { symbol: "cross-thin-open" },
  x: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,],
  y: [74.28,112.54,147.68,166.17,175.21,179.67,181.21,205.90,232.66,255.82,283.38,306.30,330.76,351.22,],
  line: {color: 'black'},
  name: "Benchmark"
};
var trace_ecm = {
  type: "scatter",
  mode: "lines",
  x: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,],
  y: [99.60,151.60,170.40,174.80,175.60,175.60,175.20,202.40,228.40,254.80,280.80,310.00,334.80,336.80,],
  line: {color: '#ff7f0e'},
  name: "ECM LC Prediction"
};
var trace_roofline = {
  type: "scatter",
  mode: "lines",
  x: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,],
  y: [79.68,159.39,175.77,175.77,175.77,175.77,175.77,200.89,226.01,251.12,276.23,301.34,326.47,351.54,],
  line: {color: '#1f77b4'},
  name: "Roofline LC Prediction"
};

var data = [trace_benchmark,trace_ecm,trace_roofline];

var layout = {
	xaxis: {title: 'Number of Threads',
          range: [0.5,14.5],
          nticks: 14},
	yaxis: {title: 'Performance [MLUP/s]',
          rangemode: "tozero"},
  margin: { l: 50, r: 35, t: 10, b: 40},
  legend: { orientation: "h",
            y:1.1 },
  width: 600,
  height: 450,
};

var config = {locale: 'en'};
Plotly.newPlot('scaling', data, layout, config);
</script>

    </div>

  </div>
  <div class="section-block-half">
    <h2 id="single-core-spatial-blocking">Single Core Spatial Blocking</h2>

    <p><input class="plot-button" type="button" onclick="document.getElementById('blocking_L3-3D').style.display = 'none';document.getElementById('blocking_L3-3D').style.display = 'block';" value="L3-3D" /></p>

    <div class="blocking">

      <div id="blocking_L3-3D"></div>

      <script>
var trace_benchmark = {
  type: "scatter",
  mode: "markers",
  marker: { symbol: "cross-thin-open" },
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [100.47,145.09,154.04,113.51,156.05,98.16,88.68,74.21,83.93,88.29,82.12,81.69,82.56,85.50,79.41,68.89,83.65,83.74,83.58,83.97,78.93,81.59,81.88,81.78,80.59,80.11,78.83,82.42,77.99,79.74,79.34,69.75,79.30,78.20,78.03,78.93,77.02,76.13,75.77,75.62,75.57,74.14,74.02,75.07,74.65,73.64,74.14,73.50,74.30,73.44,],
  line: {color: 'black'},
  name: "Benchmark"
};
var trace_benchmark_block = {
  type: "scatter",
  mode: "markers",
  marker: { symbol: "cross-thin-open" },
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [75.95,137.20,147.89,118.48,150.20,96.93,82.24,68.95,81.10,85.42,84.62,80.29,85.72,86.83,83.47,64.63,84.92,86.55,86.10,81.17,82.24,85.76,86.09,69.02,84.01,83.50,84.16,80.07,84.03,83.48,83.17,48.09,84.23,82.72,82.66,82.96,82.23,81.80,82.49,80.09,83.02,81.61,82.24,83.26,83.62,82.94,83.26,78.39,82.56,82.10,],
  line: {color: 'green'},
  name: "Benchmark w/ L3-3D blocking"
};
var trace_roofline = {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [287.60,230.00,230.00,230.00,186.00,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,124.80,99.60,99.60,99.60,99.60,99.60,99.60,99.60,99.60,99.60,99.60,99.60,99.60,99.60,99.60,99.60,],
  line: {color: '#1f77b4'},
  name: "Roofline LC"
};
var trace_ecm = {
  type: "scatter",
  mode: "lines",
  x: [10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450,460,470,480,490,500,],
  y: [261.99,166.96,166.96,166.96,155.66,91.13,91.13,91.09,91.13,91.13,91.13,91.13,91.09,91.13,91.13,91.13,91.13,87.62,87.62,87.62,87.66,87.66,87.66,87.62,87.66,87.66,87.62,87.62,87.66,87.62,87.66,87.62,87.62,87.62,87.62,79.65,79.65,79.65,79.65,79.68,79.68,79.68,79.68,79.65,79.68,79.65,79.68,79.68,79.65,79.65,],
  line: {color: '#ff7f0e'},
  name: "ECM"
};

var data = [trace_benchmark,trace_benchmark_block,trace_roofline,trace_ecm];

var layout = {
  xaxis: {title: "Grid Size (N^3)",
          rangemode: "tozero"},
  yaxis: {title: 'Performance [MLUP/s]',
          rangemode: "tozero"},
  margin: { l: 50, r: 35, t: 10, b: 40},
  legend: { orientation: "h",y:1.1},
  width: 600,
  height: 450,
};

var config = {locale: 'en'};
Plotly.newPlot('blocking_L3-3D', data, layout, config);
</script>

    </div>

  </div>

</div>

<div class="section-block-full">
  <h2 id="how-to-replicate-this-data">How to replicate this data</h2>

  <div class="section-block-half">
    <h3 id="single-core-measurements">Single Core Measurements</h3>

    <p>Using the <a href="#how-to-test-this-stencil">generated stencil</a> and <a href="https://github.com/RRZE-HPC/kerncraft">kerncraft</a>, all single core performance data shown on this page can be reproduced by:</p>

    <h4 id="layer-condition-data">Layer Condition Data</h4>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kerncraft <span class="nt">-p</span> ECM <span class="nt">-p</span> RooflineIACA <span class="nt">-p</span> Benchmark <span class="nt">-p</span> LC <span class="nt">-P</span> LC <span class="nt">-m</span> HaswellEP_E5-2695v3_CoD.yml stencil.c <span class="nt">-D</span> N <span class="nv">$GRID_SIZE</span> <span class="nt">-D</span> M <span class="nv">$GRID_SIZE</span> <span class="nt">-D</span> P <span class="nv">$GRID_SIZE</span> <span class="nt">-vvv</span> <span class="nt">--cores</span> 1 <span class="nt">--compiler</span> icc
</code></pre></div>    </div>

    <h4 id="cache-simulator-data">Cache Simulator Data</h4>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kerncraft <span class="nt">-p</span> ECM <span class="nt">-p</span> RooflineIACA <span class="nt">-p</span> Benchmark <span class="nt">-p</span> LC <span class="nt">-P</span> CS <span class="nt">-m</span> HaswellEP_E5-2695v3_CoD.yml stencil.c <span class="nt">-D</span> N <span class="nv">$GRID_SIZE</span> <span class="nt">-D</span> M <span class="nv">$GRID_SIZE</span> <span class="nt">-D</span> P <span class="nv">$GRID_SIZE</span> <span class="nt">-vvv</span> <span class="nt">--cores</span> 1 <span class="nt">--compiler</span> icc
</code></pre></div>    </div>
  </div>

  <div class="section-block-half">
    <h3 id="thread-scaling-measurements">Thread Scaling Measurements</h3>

    <p>The <a href="#how-to-test-this-stencil">generated benchmark code</a> can be used to reproduce the thread scaling data shown on this page by:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kerncraft <span class="nt">-p</span> ECM <span class="nt">-p</span> RooflineIACA <span class="nt">-p</span> Benchmark <span class="nt">-P</span> LC <span class="nt">-m</span> HaswellEP_E5-2695v3_CoD.yml stencil.c <span class="nt">-D</span> N <span class="nv">$GRID_SIZE</span> <span class="nt">-D</span> M <span class="nv">$GRID_SIZE</span> <span class="nt">-D</span> P <span class="nv">$GRID_SIZE</span> <span class="nt">-vvv</span> <span class="nt">--cores</span> <span class="nv">$CORES</span> <span class="nt">--compiler</span> icc
</code></pre></div>    </div>

    <p>The roofline prediction can be obtained with <a href="https://github.com/RRZE-HPC/kerncraft">kerncraft</a> and the <a href="#how-to-test-this-stencil">generated stencil</a>:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kerncraft <span class="nt">-p</span> RooflineIACA <span class="nt">-P</span> LC <span class="nt">-m</span> HaswellEP_E5-2695v3_CoD.yml stencil.c <span class="nt">-D</span> N <span class="nv">$GRID_SIZE</span> <span class="nt">-D</span> M <span class="nv">$GRID_SIZE</span> <span class="nt">-D</span> P <span class="nv">$GRID_SIZE</span> <span class="nt">-vvv</span> <span class="nt">--cores</span> <span class="k">${</span><span class="nv">threads</span><span class="k">}</span> <span class="nt">--compiler</span> icc
</code></pre></div>    </div>
  </div>

  <div class="section-block-half">
    <h3 id="spatial-blocking-measurements">Spatial Blocking Measurements</h3>

    <p>Generate benchmark code from the <a href="#how-to-test-this-stencil">stencil</a> with blocking and compile it as shown before:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>stempel bench stencil.c <span class="nt">-m</span> HaswellEP_E5-2695v3_CoD.yml <span class="nt">-b</span> 2 <span class="nt">--store</span>
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">OMP_NUM_THREADS</span><span class="o">=</span>1 likwid-pin <span class="nt">-C</span> S0:0 ./stencil <span class="nv">$GRID_SIZE</span> <span class="nv">$GRID_SIZE</span> <span class="nv">$GRID_SIZE</span> <span class="nv">$BLOCKING_M</span> <span class="nv">$BLOCKING_N</span> <span class="nv">$BLOCKING_P</span>
</code></pre></div>    </div>
  </div>

</div>



      </section>
      <footer>
        
          <p>Project maintained by <a href="https://github.com/RRZE-HPC">RRZE-HPC</a></p>
        
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
  </body>
</html>
